<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pedidos CVC 58mm</title>
  <style>
    body {
      font-family: monospace;
      font-size: 12px;
      margin: 0;
      padding: 10px;
      max-width: 58mm;
    }
    input, select, button {
      font-size: 14px;
      width: 100%;
      margin-bottom: 8px;
      padding: 4px;
    }
    .ticket {
      border-top: 1px dashed #000;
      margin-top: 10px;
      padding-top: 10px;
    }
  </style>
</head>
<body>
  <h2>Pedido CVC</h2>
  <form id="pedido-form">
    <label>Nombre del Cliente:
      <input type="text" id="nombre" required>
    </label>
    <label>Direcci√≥n:
      <input type="text" id="direccion" required>
    </label>
    <label>Qui√©n Entrega:
      <input type="text" id="entrega" required>
    </label>
    <label>¬øEs venta a mostrador?
      <select id="mostrador">
        <option value="S√≠">S√≠</option>
        <option value="No">No</option>
      </select>
    </label>
    <div id="productos"></div>
    <button type="button" onclick="agregarProducto()">Agregar Producto</button>
    <button type="submit">Generar Comanda</button>
  </form>

  <div class="ticket" id="ticket"></div>

  <script>
    let index = 0;

    function agregarProducto() {
      const div = document.createElement('div');
      div.innerHTML = `
        <label>Producto:
          <input type="text" name="producto-${index}" required>
        </label>
        <label>Cantidad:
          <input type="number" name="cantidad-${index}" min="0" step="any" required>
        </label>
        <label>Unidad:
          <select name="unidad-${index}">
            <option value="kg">Kilos</option>
            <option value="pzas">Piezas</option>
          </select>
        </label>
        <hr>
      `;
      document.getElementById("productos").appendChild(div);
      index++;
    }

    document.getElementById("pedido-form").addEventListener("submit", function(e) {
      e.preventDefault();

      const nombre = document.getElementById("nombre").value;
      const direccion = document.getElementById("direccion").value;
      const entrega = document.getElementById("entrega").value;
      const mostrador = document.getElementById("mostrador").value;

      let productos = "";
      for (let i = 0; i < index; i++) {
        const prod = document.querySelector(`[name='producto-${i}']`).value;
        const cant = document.querySelector(`[name='cantidad-${i}']`).value;
        const unid = document.querySelector(`[name='unidad-${i}']`).value;
        productos += `\n${prod} - ${cant} ${unid}`;
      }

      const ticketHTML = `
        <strong>Cliente:</strong> ${nombre}<br>
        <strong>Direcci√≥n:</strong> ${direccion}<br>
        <strong>Entrega:</strong> ${entrega}<br>
        <strong>Mostrador:</strong> ${mostrador}<br>
        <strong>Productos:</strong><pre>${productos}</pre>
        <button onclick="window.print()">üñ®Ô∏è Imprimir Ticket</button>
      `;
      document.getElementById("ticket").innerHTML = ticketHTML;

      // Limpia el formulario para el siguiente pedido
      document.getElementById("pedido-form").reset();
      document.getElementById("productos").innerHTML = "";
      index = 0;
    });
  </script>
</body>
</html>
